# gccコンパイルビルドオプション

コンパイルって意外と便利なんだぞ(はぁと)

これらのコマンドを知って賢くコンパイラを使おう(コンパイラはgccを想定しています)

## -o \<filename>

生成したファイルに任意の名前を付ける

### 複数ファイルのコンパイル

## -c

リンクを行わずにソースファイルごとに`*.o`ファイルを生成する  
`.o`ファイルを使ってコンパイルすると

## -Wall

~~壁じゃないぞ~~

warningを出せるだけ出してくれる  
バグの可能性のある部分をあらかじめ警告する  
付けておいた方がお得

## -std=c++11, 14, 17, 20

c++の機能を有効にする  
C++11の機能を有効にしたければ`-std=c++11`、  
C++20の機能を有効にしたければ`-std=c++20`

## -O1, -O2, -O3, -Os

最適化オプション  
これを指定することで最適化してくれる

- `-O0` : 最適化しない  
- `-O`, `-O1` : 基本的な最適化
- `-O2` : ↑よりも最適化を行う  
  コンパイル時間やメモリの消費量は増えるが生成コードの効率は良くなる
- `O3` : `O2`より早い
  コードが生成される可能性があるが思い通りに動く保証はないので推奨されない
- `Os` : バイナリのサイズを重視した最適化で、`-O2`オプションの一部の機能を制限したものなの
- `-Og` : デバッグ機能を維持しつつコードの最適化をいい感じに行う

## -I <ディレクトリ>

インクルードパスをコマンドラインから指定できる

```sh
gcc -o sample -I/usr/local/hoge main.c
```

## -L <ディレクトリ>

ライブラリ検索パスをコマンドラインから指定する

```sh
gcc -o sample -L/usr/local/lib/hoge -lfoo -lbar main.c
```

ライブラリ検索パスを追加し、さらにそこから`libhoo.a`、`libbar.a`を読み込むやつ

### -l \<libraryname>

ファイル名での指定

## -D

マクロを定義

```sh
gcc -o sample -DHOO main.c
```

これで

```C++
#define HOO 1
```

を定義したのと同じ挙動になる

また、

```sh
gcc -o sample -DHOO=10 main.c
# または
gcc -o sample -DHOO=\"string\" main.c
```

とすることでそれぞれ

```C++
#define HOO 100

#define HOO "string"
```

を加えたのと同じ結果になる

### -U

マクロの無効化  
書き方は`-D`と同じなので省略する

## -g

デバッガ用に追加のシンボルテーブルを追加する

このほかにもたくさんあるので興味があれば調べると良いだろう

2021/01/26  
written by 西永
