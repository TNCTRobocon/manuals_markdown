# STM32マイコン周辺回路の設計  

現在ロボAではモータードライバ周辺などの制御にSTMマイコンを使用しています。
~~このマイコンはペリフェラルは優秀なのですが、それ以外の面ははっきり言って微妙です~~
使いこなせるようになるとかなり強力な武器になるのでぜひ習得しましょう。

## 使うペリフェラルの選定  

まずはどのペリフェラルを使うのか決めましょう  
よく使うもの(2022年度に使ったもの)は次の通り  

| ペリフェラル名 | 用途 | 備考 |
| :---: | :---: | :---: |
| Advanced-control timers | PWM生成、エンコーダ読み込み、タイマー割り込み | F446REだとTIM1,TIM8 各々4ch分ある |
| General-purpose timers | PWM生成、エンコーダ読み込み、タイマー割り込み |  |
| ADC | AD変換　電圧、電流監視 |  |
| U(S)ART | シリアル通信 | USARTモジュールもUARTできる |
| CAN | CAN通信 | 外部にトランシーバ必須 |

タイマーに関しては各々使える機能が決まっているのでCUBE IDEなどで確認しましょう

## ピン設定  

次にどのピンにどの機能を割り当てるか決めましょう  
~~はっきり言ってこの作業くそだるい~~
まあ機能するだけでいいなら楽なんですけど、基板設計時には配線作業についても考慮しなければなりません  
機能ごとではなくモジュールごとにピンを割り振ると楽です  