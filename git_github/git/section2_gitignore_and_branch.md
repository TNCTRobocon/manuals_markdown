# gitで知っておいたほうがいいことその1

## .gitignore

### .gitignoreとは

.gitignore　という名前のファイルに記述する

ステージングするときに毎回ファイルを指定して……とするのは面倒だ  
そんな時に.gitignoreを使えば追跡しないファイルに指定することができる  

よくわからないだろうが、誤解を恐れずに言えばステージングなどをする対象外になる  
ステージングの対象外になるとそのあとのコミットもできなくなるためリポジトリに記録が残らない

### 書き方

```.gitignore
/<ファイル名>/
*.<拡張子>/
<フォルダ名>/

# をつけたらコメント
```

これ以外にもいくつかあるがよく使うのはこのあたりだろう

### .gitignoreの注意

ファイルをコミットしてしまったら追跡の対象になってしまうから先に.gitignoreを書いてindexに追加すればそのような心配はない

### 追跡を切る方法

このファイル.gitignoreに登録しなきゃいけないのにコミットしちゃった！

そんな時はファイルを消してコミットしなおす  
そうすれば追跡から逃れられる

ファイルを消したくないときは

```git
git update-index --assume-unchanged <ファイル名>
or
git update-index --skip-worktree <ファイル名>
```

やっぱり追跡したくなったら

```git
git update-index --no-assume-unchanged <ファイル名>

git update-index --no-skip-worktree <ファイル名>
```

確認するときは

```git
git ls-files -v
```

#### assmue-unchanged と skip-worktree の違い

わからなければ読み飛ばしてもらっても構わないがこういう仕組みの違いだと思ってくれれば良い

- assume-unchanged : そのファイルが作業ツリー上で変更されているときでも、git はその変更を無視して変更されていないとみなす
- skip-worktree : そのファイルが作業ツリー上で変更されているときには、git はその変更を保つ

`git reset --hard`を実行したときに assume-unchanged は変更が破棄される、skip-tree 変更が保存されたままになる

あたりが違いとしてあらわれてくる

## ブランチ

### ブランチとは

日本語訳すると枝という意味

![branch](imgs/branch.png)

>[Git 入門](https://qiita.com/sicentistengineer01/items/ce41661d9a9d44b66b23)
より

このように別の場所で作業して、作業の成果をもとのところで統合するといった作業を行う  
こうすると、複数の人と作業しても混ざらないで、開発作業を平行して進めていくことができる

また、release と developを分けることによってどこまでできたかの管理をすることも可能だ

### ブランチの命名方法

<user名>/<機能>
<user名>/dev や<user名>/release

などuserとそのブランチで何がしたいかがパット見てわかるようなブランチ名を付けよう

### ブランチの作り方

```git
git checkout -b <ブランチ名>
```

好きなブランチを作ることができる

### ブランチの移動方法

```git
git checkout <ブランチ名>
```

好きなブランチに移動できる

### mergeしよう

枝分かれさせたブランチを本流のブランチに戻そうという作業

ローカルでやる場合のみ説明する  
リモートの場合は次回扱う

例えばnaga/devというブランチをmainブランチに統合したい(mergeしたいともいう)とする  
まずはmainブランチに移動

```git
git checkout main
```

次にmergeする

```git
git merge naga/dev
```

これでnaga/devブランチの変更を取りこめた

よく、変更履歴が～などと出るが、それはコンフリクト(衝突)をおこしているのが原因と考えられる

コンフリクトについては次回解説する

2021/12/08
writen by 西永
